<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Library - BMSS Rubik's Cube Club</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: white;
      color: #333;
    }
    nav {
      background-color: #69a769;
      padding: 1rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    nav a {
      color: white;
      text-decoration: none;
      margin: 0 1rem;
      font-weight: bold;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    nav a:hover {
      background-color: rgba(255,255,255,0.2);
    }
    .active {
      background-color: white;
      color: #69a769;
    }
    main {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 80vh;
      padding: 2rem;
      padding-bottom: 5rem;
    }
    h1, h2 {
      color: #69a769;
    }
    h1 { font-size: 2.5rem; margin-bottom: 1rem; }
    p { max-width: 600px; line-height: 1.6; color: #666; text-align: center; }
    table { width: 80%; max-width: 800px; border-collapse: collapse; margin: 2rem auto; background-color: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    table th, table td { border: 1px solid #69a769; padding: 0.8rem; text-align: left; }
    table th { background-color: #69a769; color: white; }
    table tr:nth-child(even) { background-color: #f2f2f2; }
    .borrow-btn { background-color: #69a769; color: white; padding: 0.5rem 1rem; border: none; border-radius: 5px; cursor: pointer; }
    .borrow-btn:hover { background-color: #7CFC00; }
    .borrow-btn:disabled { background-color: #ccc; cursor: not-allowed; }
    footer { background-color: #69a769; color: white; text-align: center; padding: 1rem; position: fixed; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <nav>
    <a href="index.html">Home</a>
    <a href="aboutus.html">About Us</a>
    <a href="schranking.html">School Ranking</a>
    <a href="events.html">Events</a>
    <a href="members.html">Members</a>
    <a href="library.html" class="active">Library</a>
  </nav>

  <main>
    <h1>Library</h1>
    <p>
      Borrow cubes from our library! You can borrow an item for up to <strong>7 days</strong>.  
      If you need more time, you must ask a <strong>club leader</strong> to renew your borrow.
    </p>

    <table id="library-table">
      <thead>
        <tr>
          <th>Item ID</th>
          <th>Name</th>
          <th>Type</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="library-tbody"></tbody>
    </table>
  </main>

  <footer>
    &copy; 2025 BMSS Rubik's Cube Club. Hosted on GitHub Pages.
  </footer>

  <script>
    async function loadLibrary() {
      try {
        const response = await fetch('admin/library.json'); // fetch from admin folder
        const items = await response.json();
        const tbody = document.getElementById('library-tbody');
        tbody.innerHTML = '';

        for (const item of items) {
          const row = tbody.insertRow();
          row.insertCell().textContent = item.id;
          row.insertCell().textContent = item.name;
          row.insertCell().textContent = item.type;
          row.insertCell().textContent = item.status;

          const actionCell = row.insertCell();
          const borrowBtn = document.createElement('button');
          borrowBtn.className = 'borrow-btn';
          borrowBtn.textContent = 'Borrow';

          if (item.status === "available") {
            borrowBtn.disabled = false;
          } else {
            borrowBtn.disabled = true;
          }

          actionCell.appendChild(borrowBtn);
        }
      } catch (error) {
        console.error('Error loading library data:', error);
      }
    }

    window.onload = loadLibrary;
  </script>
</body>
</html>
